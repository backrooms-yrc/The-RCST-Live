## The RCST Live — 前端播放器（The-RCST-Live）

轻量的私域直播前端页面，用于加载 m3u8（HLS）流或通过第三方解析器在 iframe 中播放。该仓库包含一个简洁的单页前端：`index.html` 与负责播放逻辑的 `assets/js/player.js`。

## 功能概览

- 选择播放模式：原生 `<video>`（结合 hls.js）或 `iframe` 加载解析器页面。
- 自动检测 m3u8 链接并使用 hls.js 回退实现跨浏览器播放。
- 可通过 `parsers` 数组把解析器（解析/转发页面）直接注入前端，支持快速按钮切换。
- 深/浅色主题切换；响应式布局与移动端优化；简易公告模态框。

## 文件结构

- `index.html` — 主页面（样式、布局、脚本引入）。
- `assets/js/player.js` — 播放控制逻辑（解析器列表、事件绑定、HLS 回退、iframe 加载、公告弹窗）。

## 快速开始（本地预览）

你可以使用任意静态文件服务器在本地预览（推荐方式：Python 或 Node）：

PowerShell 示例：

```powershell
# 使用 Python 自带的静态文件服务器（Python 3）
python -m http.server 8000

# 或使用 npm 的 http-server（若已安装）
npx http-server -c-1 -p 8000
```

然后在浏览器打开 `http://localhost:8000`（或对应端口）。

注意：若直接在文件协议（file://）打开，可能会遇到跨域或资源加载限制；请使用 HTTP 服务。 

## 使用说明

1. 页面加载后，你可以：
   - 在输入框中粘贴一个 m3u8 链接，然后点击“▶ 播放”。若浏览器支持或 hls.js 可用，将在 `<video>` 中播放。
   - 或选择一个解析器（下拉或快速按钮），然后点击播放，页面会在 `iframe` 中加载解析器页面（通常解析器会输出内嵌播放或转码）。
2. 切换播放器模式：顶部的“video标签播放模式 / iframe标签播放模式”切换按钮。
3. 主题切换按钮位于右上，用于深浅色模式切换，设置会保存在 `localStorage` 中。

## 如何添加或更新解析器

解析器列表定义在 `assets/js/player.js`，形如：

```js
const parsers = [
  { name: "直播接口测试", url: "https://example.com/parser?url=..." },
];
```

添加新解析器后，页面会自动在下拉与“快速选择”按钮中显示。建议不要在前端存放敏感或受限的私密接口；长期方案应由后端托管并通过 API 提供解析器列表。

## 合同（简短接口约定）

- 输入：用户可提供一个 URL（可能为 m3u8）或从下拉选择解析器。
- 输出：在 `<video>` 或 `iframe` 中呈现播放结果，页面会在 `#meta` 文本节点显示状态信息。
- 错误模式：浏览器不支持 HLS、跨域（CORS）导致无法加载、解析器页面被 X-Frame-Options 拒绝。

## 常见问题与排查建议

- 无法播放 m3u8：打开浏览器开发者工具，检查网络请求（是否 4xx/5xx）、是否跨域被阻止（CORS）。
- iframe 空白或被拦截：目标解析器或站点可能返回 `X-Frame-Options: DENY` 或 CSP 限制。可切换到 video 模式或在服务器端代理该解析器。
- 浏览器不支持 HLS：多数桌面/移动 Safari 原生支持 HLS；其他浏览器会使用 `hls.js` 回退。确保 `hls.min.js` 已成功加载。
- 多次切换播放源导致旧的 Hls 实例仍在：当前代码会在开始新播放前销毁 `window._hls`（若存在），但如果扩展或修改代码，请确保在加载新源前正确销毁旧实例以避免内存泄漏。

## 安全与隐私提醒

- 项目示例将解析器数组硬编码在前端（`assets/js/player.js`）。如果这些解析器包含私密 token 或受限接口，请不要把它们直接暴露在前端。
- 解析第三方视频/解析器时请注意版权与服务条款，未经许可不要传播受版权保护的内容。

## 建议的改进（可选）

1. 将解析器列表移到后端 API 动态获取，前端只读取公共配置，便于管理与权限控制。
2. 为播放逻辑添加更完善的错误提示（例如对 hls.js 错误事件监听，展示友好的用户提示）。
3. 增加 CSP、子资源完整性（SRI）或更严格的 Content-Security-Policy 来提高安全性。
4. 在 `player.js` 中对用户输入 URL 做更严格的验证与白名单过滤，防止被利用做任意跳转。

## 许可与联系方式

该仓库作者：backrooms-yrc（The RCST Live 前端）。
如需联系或报告问题，请发送邮件至 ruochenyang161@gmail.com 或提交 GitHub Issue。 

---

最后更新：2025-10-26
# The-RCST-Live
一个简单的直播网页前端。
和提供给HMedia的企业版不同，此版本为面向公众的社区版。
功能：
企业版：m3u8与其它多种类型的媒体格式的嵌入、精美的页面、完美的用户交互动画、主题鲜明的Tips板块、基于即时通讯的用户讨论区简洁的公告栏目与弹窗提示
目前社区版包含以上所有功能，讨论区功能请等待后续更新
